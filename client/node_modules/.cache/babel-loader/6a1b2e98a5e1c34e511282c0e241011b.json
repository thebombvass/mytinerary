{"ast":null,"code":"var _jsxFileName = \"/Users/meganvomvas/Desktop/Kod/UbiqumJava/my-app/client/src/components/LandingPage.js\";\nimport React, { Component } from 'react';\nimport MYtineraryLogo from '../assets/MYtineraryLogo.png';\nimport '../assets/LandingPage.css';\nimport jwt_decode from 'jwt-decode'; // import dependency\n\nimport { connect } from 'react-redux'; //Components\n\nimport StartBrowsing from './StartBrowsing';\nimport NavBar from './NavBar';\nimport PopularItineraries from './PopularItineraries'; //action imports\n\nimport { saveLoggedInUser } from '../store/actions/cityActions'; //on component did mount (so it happens only once bc you created an infite redirect earlier)\n//  add this stuff below and also change the url to not have the hash in it and check that it still \n//  is stored in local storage\n\nclass LandingPage extends Component {\n  async componentDidMount() {\n    //when you first log in, store the token \n    if (window.location.hash.length > 0) {\n      //store token in local and log\n      localStorage.setItem('token', window.location.hash.slice(1));\n      let token = localStorage.getItem('token');\n      console.log(token); //decode token and log\n\n      let decoded = jwt_decode(token);\n      console.log(decoded); //push decoded token info in central store for current user\n\n      let currentProfPicUrl = decoded.avatarPicture;\n      let currentUsername = decoded.username;\n      await this.props.dispatch(saveLoggedInUser(currentUsername, currentProfPicUrl)); //log isLoggedIn value\n\n      console.log('is logged in? : ', this.props.test); //get rid of hash ?\n\n      window.history.pushState(\"\", document.title, window.location.pathname + window.location.search); //if youre returning\n    } else if (localStorage.getItem('token')) {\n      console.log('yes there is a token, yorue returning');\n      let token = localStorage.getItem('token');\n      console.log(token); //decode token and log\n\n      let decoded = jwt_decode(token);\n      console.log(decoded); //push decoded token info in central store for current user\n\n      let currentProfPicUrl = decoded.avatarPicture;\n      let currentUsername = decoded.username;\n      await this.props.dispatch(saveLoggedInUser(currentUsername, currentProfPicUrl)); //log isLoggedIn value\n\n      console.log('is logged in? : ', this.props.test);\n    } else {\n      console.log('No token, youre not logged in');\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: MYtineraryLogo,\n      className: \"Mytinerary-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"TagLine\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Find your perfect trip, designed by insiders who know and love their cities.\"), React.createElement(StartBrowsing, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"PopularHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Popular MYtineraries:\"), React.createElement(PopularItineraries, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentUsername: state.cities.currentUsername,\n    currentProfPicUrl: state.cities.currentProfPicUrl,\n    test: state.cities.isLoggedIn\n  };\n};\n\nexport default connect(mapStateToProps)(LandingPage);","map":{"version":3,"sources":["/Users/meganvomvas/Desktop/Kod/UbiqumJava/my-app/client/src/components/LandingPage.js"],"names":["React","Component","MYtineraryLogo","jwt_decode","connect","StartBrowsing","NavBar","PopularItineraries","saveLoggedInUser","LandingPage","componentDidMount","window","location","hash","length","localStorage","setItem","slice","token","getItem","console","log","decoded","currentProfPicUrl","avatarPicture","currentUsername","username","props","dispatch","test","history","pushState","document","title","pathname","search","render","mapStateToProps","state","cities","isLoggedIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport MYtineraryLogo from '../assets/MYtineraryLogo.png'\nimport '../assets/LandingPage.css';\nimport jwt_decode from 'jwt-decode' // import dependency\nimport { connect } from 'react-redux'\n\n\n//Components\nimport StartBrowsing from './StartBrowsing'\nimport NavBar from './NavBar'\nimport PopularItineraries from './PopularItineraries'\n\n//action imports\nimport { saveLoggedInUser } from '../store/actions/cityActions';\n\n\n//on component did mount (so it happens only once bc you created an infite redirect earlier)\n//  add this stuff below and also change the url to not have the hash in it and check that it still \n//  is stored in local storage\n\nclass LandingPage extends Component {\n\n  async componentDidMount() {\n    //when you first log in, store the token \n    if (window.location.hash.length>0) {\n      \n      //store token in local and log\n      localStorage.setItem('token', window.location.hash.slice(1))\n      let token = localStorage.getItem('token')\n      console.log(token)\n      \n      //decode token and log\n      let decoded = jwt_decode(token)\n      console.log(decoded)\n      \n      //push decoded token info in central store for current user\n      let currentProfPicUrl = decoded.avatarPicture\n      let currentUsername = decoded.username\n      await this.props.dispatch(saveLoggedInUser(currentUsername, currentProfPicUrl))\n\n      //log isLoggedIn value\n      console.log('is logged in? : ', this.props.test)\n\n      //get rid of hash ?\n      window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n    \n    //if youre returning\n    } else if(localStorage.getItem('token')) {\n      console.log('yes there is a token, yorue returning')\n      let token = localStorage.getItem('token')\n      console.log(token)\n      \n      //decode token and log\n      let decoded = jwt_decode(token)\n      console.log(decoded)\n      \n      //push decoded token info in central store for current user\n      let currentProfPicUrl = decoded.avatarPicture\n      let currentUsername = decoded.username\n      await this.props.dispatch(saveLoggedInUser(currentUsername, currentProfPicUrl))\n\n      //log isLoggedIn value\n      console.log('is logged in? : ', this.props.test)\n    } else {\n      console.log('No token, youre not logged in')\n    }\n  } \n\n  render() {\n\n      return (\n        <div className=\"App\">\n            <NavBar></NavBar>\n            <img src={MYtineraryLogo} className=\"Mytinerary-logo\" alt=\"logo\" />\n            <p className=\"TagLine\">Find your perfect trip, designed by insiders who know and love their cities.</p>\n            <StartBrowsing />\n            <p className=\"PopularHeader\">Popular MYtineraries:</p>\n            <PopularItineraries></PopularItineraries>\n        </div>\n      );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      currentUsername: state.cities.currentUsername,\n      currentProfPicUrl: state.cities.currentProfPicUrl,\n      test: state.cities.isLoggedIn,\n  }\n}\n\nexport default connect(mapStateToProps)(LandingPage)"]},"metadata":{},"sourceType":"module"}